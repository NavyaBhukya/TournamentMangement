<app-table [tableTitle]="tableTitle" [columns]="columns" [data]="data" [addButtonLabel]="addButtonLabel"
    (onAdd)="onCreateTournament()" (onSearch)="handleSearch($event)"></app-table>

<p-dialog header="Add New Tournament" [(visible)]="isAddTournament" [modal]="true" [style]="{ width: '50vw' }"
    [draggable]="false" [resizable]="false">

    <form [formGroup]="tournamentForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
            <label for="name">Tournament Name</label>
            <input type="text" id="name" formControlName="name" class="form-control"
                placeholder="Enter tournament name" />
            <small *ngIf="tournamentForm.get('name')?.invalid && tournamentForm.get('name')?.touched"
                class="text-danger">
                Name is required.
            </small>
        </div>

        <div class="form-group">
            <label for="sport">Sport</label>
            <input type="text" id="sport" formControlName="sport" class="form-control" placeholder="Enter sport type" />
            <small *ngIf="tournamentForm.get('sport')?.invalid && tournamentForm.get('sport')?.touched"
                class="text-danger">
                Sport is required.
            </small>
        </div>

        <div class="form-group">
            <label for="teams">Teams</label>
            <p-multiSelect [options]="teamsOptions" formControlName="teams" defaultLabel="Select teams" class="w-100">
            </p-multiSelect>
            <small *ngIf="tournamentForm.get('teams')?.invalid && tournamentForm.get('teams')?.touched"
                class="text-danger">
                At least one team must be selected.
            </small>
        </div>

        <div class="form-group">
            <label for="pools">Pools</label>
            <input type="number" id="pools" formControlName="pools" class="form-control"
                placeholder="Enter number of pools (optional)" />
        </div>

        <div class="form-group">
            <label for="format">Format</label>
            <input type="text" id="format" formControlName="format" class="form-control"
                placeholder="Enter tournament format (optional)" />
        </div>

        <div class="form-group">
            <label for="profile">Profile</label>
            <input type="file" formControlName="profile" class="formControl">
        </div>

        <div class="form-group">
            <label for="startDate">Start Date</label>
            <p-calendar id="startDate" formControlName="startDate" [showIcon]="true" dateFormat="yy-mm-dd"
                class="w-100">
            </p-calendar>
        </div>

        <div class="form-group">
            <label for="endDate">End Date</label>
            <p-calendar id="endDate" formControlName="endDate" [showIcon]="true" dateFormat="yy-mm-dd" class="w-100">
            </p-calendar>
        </div>

        <div class="form-group">
            <label for="maxTeams">Maximum Teams</label>
            <input type="number" id="maxTeams" formControlName="maxTeams" class="form-control"
                placeholder="Enter max teams (optional)" />
            <small *ngIf="tournamentForm.get('maxTeams')?.errors?.['min']" class="text-danger">
                Minimum 2 teams are required.
            </small>
            <small *ngIf="tournamentForm.get('maxTeams')?.errors?.['max']" class="text-danger">
                Maximum 30 teams allowed.
            </small>
        </div>

        <div class="d-flex justify-content-end mt-3">
            <button type="button" class="btn btn-secondary me-2" (click)="isAddTournament = false">
                Cancel
            </button>
            <button type="submit" class="btn btn-primary" [disabled]="tournamentForm.invalid">
                Save
            </button>
        </div>
    </form>
</p-dialog>